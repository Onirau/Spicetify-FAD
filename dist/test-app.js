!async function(){for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));(()=>{var r=Object.create,s=Object.defineProperty,i=Object.defineProperties,c=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,p=(e,t,a)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,w=(e,t)=>{for(var a in t=t||{})f.call(t,a)&&p(e,a,t[a]);if(n)for(var a of n(t))l.call(t,a)&&p(e,a,t[a]);return e},e=(e,t)=>function(){return t||(0,e[d(e)[0]])((t={exports:{}}).exports,t),t.exports},t=(e,t,a)=>{a=null!=e?r(u(e)):{};var n=!t&&e&&e.__esModule?a:s(a,"default",{value:e,enumerable:!0}),l=e,i=void 0,o=void 0;if(l&&"object"==typeof l||"function"==typeof l)for(let e of d(l))f.call(n,e)||e===i||s(n,e,{get:()=>l[e],enumerable:!(o=c(l,e))||o.enumerable});return n},a=e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),e=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),g={onStartUp:!0,canFullscreen:!1,localeID:"en",edgeGlow:!1,bgType:"ARTIST",bgBlur:10};function I(e){Spicetify.LocalStorage.set("lmn-config-fad",JSON.stringify(e))}var m=t(a()),L=t(e()),B=t(a()),H=t(e()),y=t(a()),P={isPlaying:!1,isFullscreen:!1,isEnabled:!1,isSettingsEnabled:!1,locale_id:"en",config:void 0,fadRoot:void 0,fadButton:void 0,volumeLevel:0,currentTrack:void 0,nextTrack:void 0},h=class{constructor(){this.currentState=P,this.listeners={}}static getInstance(){return h.instance||(h.instance=new h),h.instance}getState(e){return this.currentState[e]}notifySubscriptions(e){this.listeners[e]&&this.listeners[e].forEach(e=>e())}dispatchAction(e){switch(e.type){case"SET_PLAYING":this.currentState.isPlaying=e.payload,this.notifySubscriptions("isPlaying");break;case"SET_FULLSCREEN":this.currentState.isFullscreen=e.payload,this.notifySubscriptions("isFullscreen");break;case"SET_ENABLED":this.currentState.isEnabled=e.payload,this.notifySubscriptions("isEnabled");break;case"SET_SETTINGSENABLED":this.currentState.isSettingsEnabled=e.payload,this.notifySubscriptions("isSettingsEnabled");break;case"SET_ROOT":this.currentState.fadRoot=e.payload,this.notifySubscriptions("fadRoot");break;case"SET_FADBUTTON":this.currentState.fadButton=e.payload,this.notifySubscriptions("fadButton");break;case"SET_VOLUMELEVEL":this.currentState.volumeLevel=e.payload,this.notifySubscriptions("volumeLevel");break;case"SET_LOCALE":this.currentState.locale_id=e.payload,this.notifySubscriptions("locale_id");break;case"SET_CONFIG":this.currentState.config=e.payload,e.payload&&I(e.payload),this.notifySubscriptions("config");break;case"SET_CURRENTTRACK":this.currentState.currentTrack=e.payload,this.notifySubscriptions("currentTrack");break;case"SET_NEXTTRACK":this.currentState.nextTrack=e.payload,this.notifySubscriptions("nextTrack")}}subscribeState(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}unsubscribeState(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t))}};function b(e){return h.getInstance().dispatchAction(e)}function F(e){return h.getInstance().getState(e)}function D(t){let a=h.getInstance(),[e,n]=(0,y.useState)(a.getState(t));return(0,y.useEffect)(()=>{let e=()=>{n(a.getState(t))};return a.subscribeState(t,e),()=>{a.unsubscribeState(t,e)}},[t,a]),e}function v(t,a){let n=h.getInstance(),e=()=>{var e=n.getState(t);a(e)};n.subscribeState(t,e)}var S=class{static getToken(){return Spicetify.Platform.AuthorizationAPI._state.token.accessToken}static async getArtistArt(e){if(console.log(e),null==e.artist_uri)return e.image_xlarge_url;let t=e.artist_uri.split(":")[2];"local"==e.artist_uri.split(":")[1]&&(a=await S.searchForArtist(null!=(a=e.artist_name)?a:"").catch(e=>{console.warn("[LMS] "+e)}),t=a?a.artists.items[0].id:"");var a=await S.getArtistInfo(t).catch(e=>{console.warn("[LMS] "+e)}),n=null==(n=null==(n=null==a?void 0:a.visuals)?void 0:n.headerImage)?void 0:n.sources[0].url;return n?null!=n?n:e.image_xlarge_url:null==(a=null==(e=null==(n=null==a?void 0:a.visuals)?void 0:n.avatarImage)?void 0:e.sources[0])?void 0:a.url}static async getArtistInfo(e){var t;return this.artistInfoCache.has(e)?(console.log("Cache hit"),this.artistInfoCache.get(e)):(t=(await(await fetch(`https://api-partner.spotify.com/pathfinder/v1/query?operationName=queryArtistOverview&variables=%7B%22uri%22%3A%22spotify%3Aartist%3A${e}%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%22d66221ea13998b2f81883c5187d174c8646e4041d67f5b1e103bc262d447e3a0%22%7D%7D`,{headers:{Authorization:"Bearer "+await S.getToken()}})).json()).data.artist,this.artistInfoCache.set(e,t),this.artistInfoCache.size>this.MAX_ARTIST_INFO_CACHE_SIZE&&(e=this.artistInfoCache.keys().next().value)&&this.artistInfoCache.delete(e),t)}static async searchForArtist(e){var t;return this.artistSearchCache.has(e)?this.artistSearchCache.get(e):(t=await(await fetch(`https://api.spotify.com/v1/search?q=${e}&type=artist&limit=2`,{headers:{Authorization:"Bearer "+await S.getToken()}})).json(),this.artistSearchCache.set(e,t),this.artistSearchCache.size>this.MAX_ARTIST_SEARCH_CACHE_SIZE&&(e=this.artistSearchCache.keys().next().value)&&this.artistSearchCache.delete(e),t)}static async colorExtractor(t){var e=this.colorCache.find(e=>e.uri===t);if(e)return e.colors;e=await Spicetify.CosmosAsync.get(`https://spclient.wg.spotify.com/colorextractor/v1/extract-presets?uri=${t}&format=json`);if(e.entries&&e.entries.length){var a,n={};for(a of e.entries[0].color_swatches)0!==Object.keys(a).length&&(n[a.preset]="#"+a.color.toString(16).padStart(6,"0"));return this.colorCache.length>this.MAX_COLOR_CACHE_SIZE&&this.colorCache.shift(),this.colorCache.push({uri:t,colors:n}),n}}},z=S,_=(z.MAX_COLOR_CACHE_SIZE=20,z.MAX_ARTIST_INFO_CACHE_SIZE=50,z.MAX_ARTIST_SEARCH_CACHE_SIZE=50,z.colorCache=[],z.artistInfoCache=new Map,z.artistSearchCache=new Map,t(a())),j=({value:t,onChange:l,onChangeEnd:a,onDragging:i,orientation:o="horizontal",invert:r=!1,hide_pointer:e=!1,trackStyle:n,thumbStyle:s})=>{let[c,d]=(0,_.useState)(!1),[u,f]=(0,_.useState)(!1),p=(0,_.useRef)(null),[g,m]=(0,_.useState)(0),[y,h]=(0,_.useState)(0),[b,v]=(0,_.useState)(0),S=e=>{var t,a,n;0===e.button&&(console.log("Mouse Down:",e),a=null==(a=p.current)?void 0:a.getBoundingClientRect(),t="horizontal"===o?e.clientX:e.clientY,e="horizontal"===o?e.clientX-a.left:e.clientY-a.top,a="horizontal"===o?a.width:a.height,n=r?a-e:e,n=(n=Math.min(Math.max(n,0),a))/a,h(t),v(e),m(a),l(100*n),d(!0),i(!0))},E=t=>{if(c){console.log("Mouse Move:",t);t=("horizontal"===o?t.clientX:t.clientY)-y;let e=b+t;r&&(e=g-e);t=(e=Math.min(Math.max(e,0),g))/g;l(100*t)}},x=e=>{0==e.button&&c&&(console.log("Mouse Up:",e),a(t),d(!1),i(!1))};return(0,_.useEffect)(()=>{var e;return console.log("useEffect setup"),console.log("Setting drag listeners"),null!=(e=p.current)&&e.addEventListener("mousedown",S),document.addEventListener("mouseup",x),document.addEventListener("mousemove",E),()=>{var e;console.log("useEffect cleanup"),console.log("Removing drag listeners"),null!=(e=p.current)&&e.removeEventListener("mousedown",S),document.removeEventListener("mouseup",x),document.removeEventListener("mousemove",E)}},[c,y,b,g]),_.default.createElement("div",{id:"slider-container",style:{height:"horizontal"===o?"20px":"80%",width:"horizontal"===o?"80%":"20px",position:"relative"},role:"slider","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1)},_.default.createElement("div",{ref:p,className:c?"dragging":"",style:w({height:"horizontal"===o?"10px":"100%",width:"horizontal"===o?"100%":"10px",position:"absolute",transform:"horizontal"===o?"translateY(-50%)":"translateX(50%)",backgroundColor:u?"rgba(255, 255, 255, 0.5)":"rgba(255, 255, 255, 0.3)",borderRadius:"2.5px",display:"flex",flexDirection:"vertical"===o?"column":"row",justifyContent:r?"flex-end":"flex-start",cursor:e?"default":"pointer"},n)},_.default.createElement("div",{style:w({width:"horizontal"===o?t+"%":"100%",height:"horizontal"===o?"100%":t+"%",backgroundColor:u?"#1ed760":"#1db954",borderRadius:"2.5px",transition:c?"none":"width 1s linear, height 1s linear"},s)})))},E=t(a()),U=({children:e,threshold:n=115})=>{let[t,l]=(0,E.useState)(!1),i=(0,E.useRef)(null),a=e=>{var t,a;i.current&&(t=i.current.firstElementChild)&&(a=(t=t.getBoundingClientRect()).left+t.width/2,t=t.top+t.height/2,a=Math.sqrt(Math.pow(e.clientX-a,2)+Math.pow(e.clientY-t,2)),l(a<n))};return(0,E.useEffect)(()=>(document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousemove",a)}),[]),E.default.createElement("div",{ref:i,style:{opacity:t?1:0,transition:"opacity 0.3s"}},e)},x=t(a()),X=()=>x.default.createElement("div",{style:{padding:"5px",cursor:"pointer",display:"flex",alignItems:"center"}},x.default.createElement("div",{style:{width:"30px",height:"30px",marginRight:"10px",backgroundColor:"#444",borderRadius:"5px",animation:"skeleton-load 1s infinite alternate"}}),x.default.createElement("div",{style:{width:"100px",height:"15px",backgroundColor:"#444",borderRadius:"5px",animation:"skeleton-load 1s infinite alternate"}})),V=(e,t)=>{var a="#"===e[0],e=a?e.slice(1):e,e=parseInt(e,16),n=(e>>16)+t,l=(e>>8&255)+t,e=(255&e)+t;return(a?"#":"")+(Math.min(255,Math.max(0,n))<<16|Math.min(255,Math.max(0,l))<<8|Math.min(255,Math.max(0,e))).toString(16).padStart(6,"0")},G=e=>{var t=Math.floor(e/60),e=Math.floor(e%60);return t+":"+(e<10?"0":"")+e},k=t(a()),T=t(a()),C={en:{langName:"English",strings:{actions:{},description:{fullscreen:"Fullscreen Display"},settings:{settings_title:"Settings",language:"Language",on_startup:"Run on Startup",enable_fullscreen:"Enable Fullscreen",enable_edgeglow:"Enable Edge Glow",bg_type:"Background Type",bg_types:{album:"Album",static:"Static",artist:"Artist"},bg_blur:"Background Blur"}}},es:{langName:"Español (Traducido Automáticamente)",strings:{actions:{},description:{fullscreen:"Pantalla Completa"},settings:{settings_title:"Configuración",language:"Idioma",on_startup:"Ejecutar al iniciar",enable_fullscreen:"Habilitar Pantalla Completa",enable_edgeglow:"Habilitar Brillo en los Bordes",bg_type:"Tipo de Fondo",bg_types:{album:"Álbum",static:"Estático",artist:"Artista"},bg_blur:"Desenfoque de Fondo"}}},fr:{langName:"Français (Traduit Automatiquement)",strings:{actions:{},description:{fullscreen:"Plein écran"},settings:{settings_title:"Paramètres",language:"Langue",on_startup:"Lancer au démarrage",enable_fullscreen:"Activer le mode plein écran",enable_edgeglow:"Activer l'éclat des bords",bg_type:"Type de fond",bg_types:{album:"Album",static:"Statique",artist:"Artiste"},bg_blur:"Flou de fond"}}},de:{langName:"Deutsch (Automatisch Übersetzt)",strings:{actions:{},description:{fullscreen:"Vollbild"},settings:{settings_title:"Einstellungen",language:"Sprache",on_startup:"Beim Start ausführen",enable_fullscreen:"Vollbild aktivieren",enable_edgeglow:"Randleuchten aktivieren",bg_type:"Hintergrundtyp",bg_types:{album:"Album",static:"Statisch",artist:"Künstler"},bg_blur:"Hintergrundunschärfe"}}}},A=(e,t)=>{var a,t=null!=t?t:F("locale_id"),n=e.split(".");let l=C[t].strings;for(a of n)if(void 0===(l=l[a]))return e;return l||e};var Y=function(){let n=D("config");var e=(()=>{let t=D("locale_id"),[e,a]=(0,T.useState)(()=>e=>A(e,t));return(0,T.useEffect)(()=>{a(()=>e=>A(e,t))},[t]),e})();let t=(0,k.useRef)(null),a=(e,t)=>{var a;console.log("update the config",e,"set to",t),b({type:"SET_CONFIG",payload:(a=w({},n),i(a,o({[e]:t})))})},l=e=>{0===e.button&&t.current&&!t.current.contains(e.target)&&b({type:"SET_SETTINGSENABLED",payload:!1})};return(0,k.useEffect)(()=>(console.log("listening for mouse downs."),document.addEventListener("mousedown",l),()=>{console.log("released listening for mouse downs."),document.removeEventListener("mousedown",l)}),[]),k.default.createElement("div",{id:"fad-settings-root",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"}},k.default.createElement("div",{ref:t,style:{width:"400px",padding:"20px",backgroundColor:"#fff",borderRadius:"10px",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)"}},k.default.createElement("h2",null,e("settings.settings_title")),k.default.createElement("div",null,k.default.createElement("label",null,e("settings.on_startup")),k.default.createElement("input",{type:"checkbox",checked:null==n?void 0:n.onStartUp,onChange:e=>a("onStartUp",e.target.checked)})),k.default.createElement("div",null,k.default.createElement("label",null,e("settings.enable_fullscreen")),k.default.createElement("input",{type:"checkbox",checked:null==n?void 0:n.canFullscreen,onChange:e=>a("canFullscreen",e.target.checked)})),k.default.createElement("div",null,k.default.createElement("label",null,e("settings.language")),k.default.createElement("select",{value:null==n?void 0:n.localeID,onChange:e=>a("localeID",e.target.value)},Object.keys(C).map(e=>k.default.createElement("option",{key:e,value:e},C[e].langName)))),k.default.createElement("div",null,k.default.createElement("label",null,e("settings.enable_edgeglow")),k.default.createElement("input",{type:"checkbox",checked:null==n?void 0:n.edgeGlow,onChange:e=>a("edgeGlow",e.target.checked)})),k.default.createElement("div",null,k.default.createElement("label",null,e("settings.bg_type")),k.default.createElement("select",{value:null==n?void 0:n.bgType,onChange:e=>a("bgType",e.target.value)},k.default.createElement("option",{value:"STATIC"},e("settings.bg_types.static")),k.default.createElement("option",{value:"ARTIST"},e("settings.bg_types.artist")),k.default.createElement("option",{value:"ALBUM"},e("settings.bg_types.album")))),k.default.createElement("div",null,k.default.createElement("label",null,e("settings.bg_blur")),k.default.createElement("input",{type:"number",value:null==n?void 0:n.bgBlur,onChange:e=>a("bgBlur",Number(e.target.value))}))))},{}=Spicetify.ReactFlipToolkit,q=120;function M(){let e,t,a,n,l,i,o,r=D("isEnabled");var s=D("isSettingsEnabled");let c=D("isPlaying"),d=D("currentTrack"),u=D("config"),[f,p]=(0,B.useState)(null),[g,m]=(0,B.useState)("#000000"),[y,h]=(0,B.useState)("#FFFFFF"),[b,v]=(0,B.useState)(0),[S,E]=(0,B.useState)(!1),[x,w]=(0,B.useState)(100*Spicetify.Player.getVolume()),[_,k]=(0,B.useState)(x);var[,,]=(0,B.useState)(!1);let[T,C]=(0,B.useState)([]),[A,I]=(0,B.useState)(3),[L,P]=(0,B.useState)(!1),[M,R]=(0,B.useState)(!1);var N;let O=()=>{C([]),P(!1)};return(0,B.useEffect)(()=>{console.log("isenabled =",r);var e=F("fadRoot");e&&(r?(console.log("enable"),document.body.classList.add("fad-active")):(console.log("remove"),document.body.classList.remove("fad-active"),H.default.unmountComponentAtNode(e)))},[r]),(0,B.useEffect)(()=>{f&&(console.log("[LMC] update to artist art getting lumi values"),z.colorExtractor(f).then(e=>{m(null!=(e=null==e?void 0:e.DARK_VIBRANT)?e:"#000000"),"STATIC"===(null==u?void 0:u.bgType)?g:"ALBUM"===(null==u?void 0:u.bgType)?null!=d&&d.metadata.item.metadata.image_xlarge_url:f;R((e=>{e=e.match(/\w\w/g).map(e=>parseInt(e,16));return.2126*e[0]+.7152*e[1]+.0722*e[2]})(g)<q)}).catch(e=>console.error(e)))},[f]),(0,B.useEffect)(()=>{var e;"ARTIST"===(null==u?void 0:u.bgType)&&z.getArtistArt(null==(e=null==(e=null==d?void 0:d.metadata)?void 0:e.item)?void 0:e.metadata).then(e=>{p(e)})},[r,d,null==u?void 0:u.bgType]),(0,B.useEffect)(()=>{let e=setInterval(()=>{var e,t;c&&!S&&(e=Spicetify.Player.getProgress(),t=Spicetify.Player.getDuration(),v(e/t*100))},1e3);return()=>clearInterval(e)},[r,c,S]),(0,B.useEffect)(()=>{console.log("[LMS] theme "+(M?"is dark":"is light")),h(M?"#FFFFFF":"#000000")},[M]),B.default.createElement("div",{id:"fad-root"},B.default.createElement("div",{id:"fad-bg",style:{backgroundImage:`url(${"STATIC"===(null==u?void 0:u.bgType)?g:"ALBUM"===(null==u?void 0:u.bgType)?null==d?void 0:d.metadata.item.metadata.image_xlarge_url:f})`,backgroundColor:""+g,backgroundSize:"ARTIST"===(null==u?void 0:u.bgType)?"cover":"contain",backgroundPosition:"ARTIST"===(null==u?void 0:u.bgType)?"center":"initial",filter:"STATIC"===(null==u?void 0:u.bgType)?"none":`blur(${null!=(e=null==u?void 0:u.bgBlur)?e:0}px) contrast(0.9) brightness(0.8)`}}),(null==u?void 0:u.edgeGlow)&&B.default.createElement("div",{id:"fad-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"transparent",boxShadow:"0 0 200px 50px rgba(255, 255, 255, 0.5) inset"}}),B.default.createElement("div",{id:"fad-details"},B.default.createElement("div",{id:"fad-cover-container"},B.default.createElement("div",{id:"fad-cover",style:{backgroundImage:`url(${null==d?void 0:d.metadata.item.metadata.image_xlarge_url})`}},B.default.createElement("button",{id:"fad-playlist-add",onClick:async()=>{if(P(!L),console.log(`[LMC] show playlists to (${L})`),L)O();else{var e,t,a,n=await Spicetify.Platform.RootlistAPI.getContents(),n=(console.log(n),n.items.filter(e=>"playlist"===e.type&&e.canAdd).map(e=>{return{name:e.name,uri:e.uri,image:null!=(e=null==(e=e.images[0])?void 0:e.url)?e:"",selected:!1,originalSelected:!1}}));I(n.length);for(e of n){l=e.uri;var l=await(await Spicetify.Platform.PlaylistAPI.getPlaylist(l)).contents.items.some(e=>{return e.uri===(null==(e=null==(e=null==d?void 0:d.metadata)?void 0:e.item)?void 0:e.uri)});console.log(e.name),e.selected=l,e.originalSelected=l}0<T.length||(t={name:"Liked Songs",uri:"liked_songs",image:"",selected:!1,originalSelected:!1},a=await Spicetify.Player.getHeart(),t.selected=a,t.originalSelected=a,n=[t,...n],C(n))}}},B.default.createElement("svg",{role:"img",height:"20",width:"20",viewBox:"0 0 16 16",fill:y,dangerouslySetInnerHTML:{__html:Spicetify.Player.getHeart()?Spicetify.SVGIcons["check-alt-fill"]:Spicetify.SVGIcons["plus-alt"]}})),L&&B.default.createElement("div",{className:"playlist-menu"},B.default.createElement("div",{className:"playlist-list"},0<T.length?T.map(e=>B.default.createElement("div",{key:e.uri,className:"playlist-item",onClick:()=>{var t;t=e.uri,C(T.map(e=>(e.uri===t&&(e.selected=!e.selected),e)))}},B.default.createElement("span",{className:"tick"},e.selected?"✓":""),e.image?B.default.createElement("div",{className:"playlist-image",style:{backgroundImage:`url(${e.image})`}}):B.default.createElement("div",{className:"playlist-image placeholder"}),B.default.createElement("span",{className:"playlist-name"},e.name))):B.default.createElement("div",null,Array.from({length:A}).map((e,t)=>B.default.createElement(X,{key:t})))),B.default.createElement("div",{className:"playlist-footer"},B.default.createElement("button",{className:"cancel-btn",onClick:O},"Cancel"),B.default.createElement("button",{className:"done-btn",onClick:()=>{T.forEach(e=>{e.selected&&!e.originalSelected&&(console.log("Adding to "+e.name),(async e=>{var t=null==(t=null==(t=null==d?void 0:d.metadata)?void 0:t.item)?void 0:t.uri;t&&("liked_songs"===e?await Spicetify.Platform.LibraryAPI.add({uris:[t]}):await Spicetify.Platform.PlaylistAPI.add(e,[t],{after:"end"}))})(e.uri)),!e.selected&&e.originalSelected&&(console.log("Removing from "+e.name),(async e=>{var t=null==(t=null==(t=null==d?void 0:d.metadata)?void 0:t.item)?void 0:t.uri;t&&("liked_songs"===e?await Spicetify.Platform.LibraryAPI.remove({uris:[t]}):await Spicetify.Platform.PlaylistAPI.remove(e,[{uri:t,uid:""}]))})(e.uri))}),C([]),P(!1)}},"Done"))))),B.default.createElement("div",{id:"fad-header"},B.default.createElement("div",{id:"fad-title-container"},B.default.createElement("div",{id:"fad-title",style:{color:y,textAlign:"center"}},null!=(a=null==(t=null==d?void 0:d.metadata.item)?void 0:t.name)?a:"Missing Title?"),B.default.createElement("div",{id:"fad-album",style:{color:y}},null!=(n=null==d?void 0:d.metadata.item.artists.map(e=>e.name).join(", "))?n:"No Album?"),B.default.createElement("div",{id:"fad-controls",style:{padding:"10px"}},B.default.createElement("button",{onClick:Spicetify.Player.back},B.default.createElement("svg",{role:"img",height:"20",width:"20",viewBox:"0 0 16 16",fill:y,dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons["skip-back"]}})),B.default.createElement("button",{onClick:Spicetify.Player.togglePlay},B.default.createElement("svg",{role:"img",height:"20",width:"20",viewBox:"0 0 16 16",fill:y,dangerouslySetInnerHTML:{__html:c?Spicetify.SVGIcons.pause:Spicetify.SVGIcons.play}})),B.default.createElement("button",{onClick:Spicetify.Player.next},B.default.createElement("svg",{role:"img",height:"20",width:"20",viewBox:"0 0 16 16",fill:y,dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons["skip-forward"]}}))),B.default.createElement("div",{id:"fad-progress-container",style:{display:"flex",width:"50%",justifyContent:"space-between",alignItems:"center",padding:"10px"}},B.default.createElement("span",{style:{color:y,paddingBottom:"20px",width:"50px",textAlign:"center"}},G(b/100*Spicetify.Player.getDuration()/1e3)),B.default.createElement(j,{value:b,onDragging:E,onChange:e=>{v(e)},onChangeEnd:e=>{var t=Spicetify.Player.getDuration();Spicetify.Player.seek(e/100*t),console.log("seeking to",e/100*t)},orientation:"horizontal",trackStyle:{backgroundColor:V(g,M?40:-40)},thumbStyle:{backgroundColor:V(g,M?80:-80)}}),B.default.createElement("span",{style:{color:y,paddingBottom:"20px",width:"50px",textAlign:"center"}},G(Spicetify.Player.getDuration()/1e3)))))),B.default.createElement(U,null,B.default.createElement("div",{id:"fad-volume-slider",style:{position:"absolute",height:"200px",left:"10px",top:"50%",transform:"translateY(-50%)"}},B.default.createElement(j,{value:Spicetify.Player.getMute()?0:x,onDragging:()=>{},onChange:e=>{w(e),k(e),Spicetify.Player.setVolume(e/100)},onChangeEnd:e=>{Spicetify.Player.setVolume(e/100),console.log("volume set to",e)},orientation:"vertical",invert:!0,trackStyle:{backgroundColor:V(g,M?40:-40)},thumbStyle:{backgroundColor:V(g,M?80:-80)}}),B.default.createElement("span",{style:{color:y,position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)"}},Math.round(_),"%"),B.default.createElement("button",{id:"fad-mute",onClick:Spicetify.Player.toggleMute},B.default.createElement("svg",{role:"img",height:"20",width:"20",viewBox:"0 0 16 16",fill:y,style:{position:"absolute",bottom:"0px",left:"50%",transform:"translateX(-50%)"},dangerouslySetInnerHTML:{__html:0===(N=Spicetify.Player.getMute()?0:x)?Spicetify.SVGIcons["volume-off"]:N<=50?Spicetify.SVGIcons["volume-one-wave"]:N<=75?Spicetify.SVGIcons["volume-two-wave"]:Spicetify.SVGIcons.volume}})))),B.default.createElement("div",{style:{color:y},id:"fad-playlist-info"},B.default.createElement("span",null,"•"),B.default.createElement("span",null,null==(o=null==(i=null==(l=null==d?void 0:d.metadata)?void 0:l.context)?void 0:i.metadata)?void 0:o.context_description),B.default.createElement("span",null,"•")),s&&B.default.createElement(Y,null))}var R=async function(){for(;!(Spicetify&&Spicetify.Keyboard&&Spicetify.React&&Spicetify.ReactDOM&&Spicetify.Platform&&Spicetify.Platform.PlaybackAPI&&Spicetify.Platform.PlaybackAPI._isAvailable&&Spicetify.showNotification);)await new Promise(e=>setTimeout(e,100));class e extends m.default.Component{constructor(e){super(e),this.handleFullscreenChange=()=>{document.fullscreenElement||l()},this.mouseTrap=new Spicetify.Mousetrap}componentDidMount(){document.addEventListener("fullscreenchange",this.handleFullscreenChange)}componentWillUnmount(){document.removeEventListener("fullscreenchange",this.handleFullscreenChange)}render(){return m.default.createElement("div",{id:"fad-display-container"},m.default.createElement(M,null))}}let t=function(){try{var e=Spicetify.LocalStorage.get("lmn-config-fad");if(e)return w(w({},g),JSON.parse(e));throw""}catch(e){return g}}();async function a(){try{document.fullscreenElement?(console.log("Exiting fullscreen..."),await document.exitFullscreen()):F("isEnabled")&&t.canFullscreen&&(console.log("Requesting fullscreen..."),await document.documentElement.requestFullscreen())}catch(e){console.error("Error toggling fullscreen:",e)}}async function n(){console.log("[LMS] FAD ACTIVE REQ!"),document.body.classList.contains("fad-active")||(b({type:"SET_ENABLED",payload:!0}),L.default.render(m.default.createElement(e),i),await a())}async function l(){console.log("[LMS] FAD REMOVE REQ!"),document.body.classList.contains("fad-active")&&(b({type:"SET_ENABLED",payload:!1}),await a())}let i=document.createElement("div");function o(){var e=Spicetify.Player.data;if(!e)return setTimeout(()=>{o()},500);e={duration:e.duration,progress:0,metadata:e};b({type:"SET_CURRENTTRACK",payload:e}),console.log(e)}i.id="fad-root",document.body.appendChild(i),console.log("setting root to",i),b({type:"SET_ROOT",payload:i}),document.getElementById("fad-root")?(Spicetify.showNotification("[LMS] Root loaded!"),Spicetify.showNotification("[LMS] Required Modules Loaded!"),console.log("[LMS] CUHS"),v("locale_id",()=>{var e=F("fadButton");e?e.label=A("description.fullscreen"):b({type:"SET_FADBUTTON",payload:new Spicetify.Topbar.Button(A("description.fullscreen"),`<svg role="img" height="16" width="16" viewBox="0 0 16 16" fill="currentColor">${Spicetify.SVGIcons.fullscreen}</svg>`,n)})}),Spicetify.Player.addEventListener("onplaypause",()=>b({type:"SET_PLAYING",payload:Spicetify.Player.isPlaying()})),Spicetify.Player.addEventListener("songchange",()=>o()),Spicetify.Platform.PlaybackAPI._events.addListener("volume",e=>b({type:"SET_VOLUMELEVEL",payload:e.data.volume})),b({type:"SET_PLAYING",payload:Spicetify.Player.isPlaying()}),b({type:"SET_VOLUMELEVEL",payload:Spicetify.Player.getVolume()}),b({type:"SET_LOCALE",payload:t.localeID}),b({type:"SET_CONFIG",payload:t}),v("config",e=>{e&&(b({type:"SET_LOCALE",payload:e.localeID}),t=e)}),v("volumeLevel",e=>{console.log("volume =>",e)}),o(),Spicetify.Mousetrap.bind("g",function(){(document.body.classList.contains("fad-active")?l:n)()}),document.addEventListener("contextmenu",e=>{F("isEnabled")&&!F("isSettingsEnabled")&&(e.preventDefault(),b({type:"SET_SETTINGSENABLED",payload:!0}))}),(t.onStartUp?n:l)()):Spicetify.showNotification("[LMS] Root failed!",!0)};(async()=>{await R()})()})();(async()=>{var e;document.getElementById("testDapp")||((e=document.createElement("style")).id="testDapp",e.textContent=String.raw`
  #fad-display-container{width:100%;height:100%;position:fixed;left:0;top:0;cursor:default;background-color:grey}#fad-details{width:100%;height:100%;position:fixed;left:0;top:20%}#fad-header{width:100%;height:auto;position:relative;background-color:transparent}#fad-title-container{width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:50px}#fad-cover-container{width:100%;display:flex;justify-content:center;align-items:center;background-color:transparent}#fad-cover{width:55%;max-width:450px;aspect-ratio:1;background-color:#8a2be2;background-size:cover;border-radius:4%}#fad-album,#fad-title{letter-spacing:.25px;font-weight:700;color:#000;margin:0;padding:0}#fad-title{font-size:4vw;padding-bottom:15px}#fad-album{font-size:2vw;font-weight:lighter}#fad-bg{width:100%;height:100%;position:fixed;left:0;top:0;background-size:cover;background-color:#7fffd4;transition:background-color 2s ease,background-image 2s ease;transform:scale(1.1)}.playing{background-color:green}.paused{background-color:#00f}#fad-controls{display:flex;justify-content:center;align-items:center;margin-top:20px}#fad-favourite{background-color:transparent;border:none;padding:0 0;margin:10px 10px;border-radius:50px;cursor:pointer;font-size:1.5vw;transition:background-color .3s,transform .3s;display:flex;justify-content:center;align-items:center}#fad-favourite :hover{transform:scale(1.1)}#fad-playlist-add{background-color:transparent;border:none;padding:0 0;margin:10px 10px;border-radius:50px;cursor:pointer;font-size:1.5vw;transition:background-color .3s,transform .3s;display:flex;justify-content:center;align-items:center}#fad-playlist-add :hover{transform:scale(1.1)}#fad-controls button{background-color:transparent;border:none;padding:10px 20px;margin:0 10px;border-radius:50px;cursor:pointer;font-size:1.5vw;transition:background-color .3s,transform .3s;display:flex;justify-content:center;align-items:center}#fad-mute{background-color:transparent;border:none;padding:0 0;margin:10px 10px;border-radius:50px;cursor:pointer;font-size:1.5vw;transition:background-color .3s,transform .3s;display:flex;justify-content:center;align-items:center}#fad-controls button:hover{transform:scale(1.1)}#fad-controls svg{width:24px;height:24px}#fad-playlist-info{position:fixed;top:15px;left:60px;font-size:2vw;font-weight:700;color:#fff;display:flex;align-items:center}#fad-playlist-info span{margin:0 10px}#fad-progress-bar-container{width:80%;height:20px;position:relative;margin-top:20px;cursor:pointer}#fad-progress-bar{height:10px;width:100%;position:absolute;top:50%;transform:translateY(-50%);background-color:rgba(255,255,255,.3);border-radius:2.5px}#fad-progress{height:100%;background-color:#1db954;border-radius:2.5px;transition:width 1s linear}#fad-progress-bar.dragging #fad-progress{transition:width 0s linear}@keyframes skeleton-load{0%{background-color:#444}100%{background-color:#666}}.playlist-menu{position:fixed;z-index:1000;background:#333;color:#fff;padding:10px;border-radius:5px;box-shadow:0 4px 8px rgba(0,0,0,.2);max-height:20vh;width:300px;display:flex;flex-direction:column;opacity:0;animation:fadeInMenu .5s forwards}@keyframes fadeInMenu{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}.playlist-list{overflow-y:auto;flex:1;margin-bottom:10px}.playlist-item{padding:5px;cursor:pointer;display:flex;align-items:center;transition:background-color .3s ease}.playlist-item:hover{background-color:rgba(255,255,255,.1)}.tick{margin-right:10px}.playlist-image{width:30px;height:30px;margin-right:10px;background-size:cover;background-position:center;border-radius:5px}.playlist-image.placeholder{background-color:#444}.playlist-footer{display:flex;justify-content:space-between}.playlist-footer button{background-color:#444;color:#fff;padding:5px 10px;border-radius:5px;border:none;cursor:pointer;transition:background-color .3s ease}.playlist-footer button:hover{background-color:#555}
      `.trim(),document.head.appendChild(e))})()}();